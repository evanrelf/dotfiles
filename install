#!/usr/bin/env bash

if ! [ -x "$(command -v stow)" ]; then
  echo "ERROR: stow is not installed" >&2
  exit 1
fi

if [ $# -gt 0 ]; then
  # Creates config folders if they don't already exist
  for i in "$@"; do
    case $i in
      # bitbar )
      #   (set -x; mkdir -p "$HOME/.config/bitbar");;
      bspwm )
        (set -x; mkdir -p "$HOME/.config/bspwm");;
      emacs-doom )
        (set -x; mkdir -p "$HOME/.emacs.d");;
      fish )
        (set -x; mkdir -p "$HOME/.config/fish/functions");;
      hammerspoon )
        (set -x; mkdir -p "$HOME/.hammerspoon");;
      kakoune )
        (set -x; mkdir -p "$HOME/.config/kak");;
      karabiner )
        (set -x; mkdir -p "$HOME/.config/karabiner");;
      kitty )
        (set -x; mkdir -p "$HOME/.config/kitty");;
      neovim )
        (set -x; mkdir -p "$HOME/.config/nvim");;
      sxhkd )
        (set -x; mkdir -p "$HOME/.config/sxhkd");;
      vscode )
        (set -x; mkdir -p "$HOME/Library/Application Support/Code/User");;
      xmonad )
        (set -x; mkdir -p "$HOME/.config/xmonad");;
      * )
        ;;
    esac
  done
  (set -x; stow --target "$HOME" -S "$@")
else
  echo "Usage:  ./install package ..." >&2
  exit 1
fi
